<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>치킨마스터2</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- 타이틀 화면 -->
    <div id="screen-title" class="screen active">
        <div class="title-container">
            <div id="title-particles" class="title-particles"></div>
            <div id="mascot-container" class="mascot-container">
                <img id="mascot-img" class="pixel-sprite" alt="mascot">
            </div>
            <h1 class="game-title">치킨마스터 2</h1>
            <p class="game-subtitle">당신만의 치킨 제국을 만들어보세요</p>
            <div class="title-form">
                <input type="text" id="player-name" placeholder="플레이어 이름" value="김치킨" maxlength="20">
                <button id="btn-new-game" class="btn btn-primary btn-lg">새 게임 시작</button>
            </div>
            <div id="resume-section" class="resume-section" style="display:none">
                <h3>이어하기</h3>
                <div id="game-list"></div>
            </div>
        </div>
    </div>

    <!-- 메인 게임 화면 (VN 레이아웃) -->
    <div id="screen-game" class="screen">

        <!-- VN HUD — 상단 바 -->
        <header id="vn-hud" class="vn-hud">
            <div class="hud-left">
                <span class="hud-item hud-day">Day <span id="hud-turn">1</span></span>
                <span class="hud-item hud-segment" id="hud-segment">준비</span>
            </div>
            <div class="hud-center">
                <span class="hud-item hud-money" id="hud-money">₩0</span>
            </div>
            <div class="hud-right">
                <span class="hud-item">준비 <span id="hud-prepared" class="hud-val">0</span></span>
                <span class="hud-item">피로 <span id="hud-fatigue" class="hud-val">0</span></span>
                <span class="hud-item">평판 <span id="hud-reputation" class="hud-val">50</span></span>
                <button id="hud-expand" class="btn btn-sm hud-btn">▲</button>
                <button id="btn-price" class="btn btn-sm hud-btn">💰</button>
                <button id="btn-bgm" class="btn btn-sm hud-btn">🔇</button>
                <button id="btn-sfx" class="btn btn-sm hud-btn">SFX</button>
            </div>
        </header>

        <!-- 상세 패널 (기본 표시) -->
        <div id="vn-detail-panel" class="vn-detail-panel">
            <div class="dash-gauges">
                <div class="gauge-item" data-gauge="money">
                    <div class="gauge-header"><span class="gauge-icon">💰</span> <span class="gauge-label">자금</span></div>
                    <div class="gauge-value" id="dash-money">-</div>
                </div>
                <div class="gauge-item" data-gauge="ingredient">
                    <div class="gauge-header"><span class="gauge-icon">🥩</span> <span class="gauge-label">원재료</span></div>
                    <div class="gauge-bar-container"><div id="bar-ingredient" class="gauge-bar" style="width:50%;background:var(--blue)"></div></div>
                    <div class="gauge-value" id="dash-ingredient">-</div>
                </div>
                <div class="gauge-item" data-gauge="prepared">
                    <div class="gauge-header"><span class="gauge-icon">🍗</span> <span class="gauge-label">준비량</span></div>
                    <div class="gauge-bar-container"><div id="bar-prepared" class="gauge-bar" style="width:0%;background:var(--orange)"></div></div>
                    <div class="gauge-value" id="dash-prepared">0</div>
                </div>
                <div class="gauge-item" data-gauge="freshness">
                    <div class="gauge-header"><span class="gauge-icon">✨</span> <span class="gauge-label">신선도</span></div>
                    <div class="gauge-bar-container"><div id="bar-freshness" class="gauge-bar" style="width:90%;background:var(--green)"></div></div>
                    <div class="gauge-value" id="dash-freshness">90</div>
                </div>
                <div class="gauge-item" data-gauge="reputation">
                    <div class="gauge-header"><span class="gauge-icon">⭐</span> <span class="gauge-label">평판</span></div>
                    <div class="gauge-bar-container"><div id="bar-reputation" class="gauge-bar" style="width:50%;background:var(--purple)"></div></div>
                    <div class="gauge-value" id="dash-reputation">50</div>
                </div>
                <div class="gauge-item" data-gauge="fatigue">
                    <div class="gauge-header"><span class="gauge-icon">😰</span> <span class="gauge-label">피로</span></div>
                    <div class="gauge-bar-container"><div id="bar-fatigue" class="gauge-bar" style="width:0%;background:var(--red)"></div></div>
                    <div class="gauge-value" id="dash-fatigue">0</div>
                </div>
                <div class="gauge-item" data-gauge="happiness">
                    <div class="gauge-header"><span class="gauge-icon">😊</span> <span class="gauge-label">행복</span></div>
                    <div class="gauge-bar-container"><div id="bar-happiness" class="gauge-bar" style="width:50%;background:var(--green)"></div></div>
                    <div class="gauge-value" id="dash-happiness">50</div>
                </div>
            </div>
            <div class="dash-stats-grid">
                <div class="stat-card" data-stat="cooking">
                    <div class="stat-header"><span class="stat-label">요리</span> <span class="stat-level" id="stat-cooking">Lv.10</span></div>
                    <div class="stat-exp-bar-container"><div class="stat-exp-bar" id="exp-bar-cooking" style="width:0%;background:var(--orange)"></div></div>
                    <div class="stat-exp-text" id="exp-text-cooking">0/100</div>
                </div>
                <div class="stat-card" data-stat="management">
                    <div class="stat-header"><span class="stat-label">경영</span> <span class="stat-level" id="stat-management">Lv.8</span></div>
                    <div class="stat-exp-bar-container"><div class="stat-exp-bar" id="exp-bar-management" style="width:0%;background:var(--blue)"></div></div>
                    <div class="stat-exp-text" id="exp-text-management">0/100</div>
                </div>
                <div class="stat-card" data-stat="service">
                    <div class="stat-header"><span class="stat-label">서비스</span> <span class="stat-level" id="stat-service">Lv.8</span></div>
                    <div class="stat-exp-bar-container"><div class="stat-exp-bar" id="exp-bar-service" style="width:0%;background:var(--green)"></div></div>
                    <div class="stat-exp-text" id="exp-text-service">0/100</div>
                </div>
                <div class="stat-card" data-stat="tech">
                    <div class="stat-header"><span class="stat-label">기술</span> <span class="stat-level" id="stat-tech">Lv.5</span></div>
                    <div class="stat-exp-bar-container"><div class="stat-exp-bar" id="exp-bar-tech" style="width:0%;background:var(--purple)"></div></div>
                    <div class="stat-exp-text" id="exp-text-tech">0/100</div>
                </div>
                <div class="stat-card" data-stat="stamina">
                    <div class="stat-header"><span class="stat-label">체력</span> <span class="stat-level" id="stat-stamina">Lv.50</span></div>
                    <div class="stat-exp-bar-container"><div class="stat-exp-bar" id="exp-bar-stamina" style="width:0%;background:var(--red)"></div></div>
                    <div class="stat-exp-text" id="exp-text-stamina">0/100</div>
                </div>
            </div>
            <div id="segment-indicator" class="segment-indicator">
                <span class="seg-badge" data-seg="PREP">🌅 준비</span>
                <span class="seg-arrow">&rarr;</span>
                <span class="seg-badge" data-seg="BUSINESS">🏪 영업</span>
                <span class="seg-arrow">&rarr;</span>
                <span class="seg-badge" data-seg="NIGHT">🌙 야간</span>
                <span class="seg-arrow">&rarr;</span>
                <span class="seg-badge" data-seg="SLEEP">😴 수면</span>
            </div>
        </div>

        <!-- VN 메인 영역 (사이드바 + 콘텐츠) -->
        <div class="vn-main">
            <!-- 좌측 행동 사이드바 (PREP/NIGHT) -->
            <aside id="action-sidebar" class="action-sidebar">
                <div id="sidebar-tabs" class="sidebar-tabs"></div>
                <div id="sidebar-panel" class="sidebar-panel">
                    <div id="sidebar-panel-actions" class="sidebar-panel-actions"></div>
                </div>
            </aside>

            <!-- VN 콘텐츠 -->
            <div class="vn-content">
                <!-- VN 스테이지: 배경 + 캐릭터 -->
                <div id="vn-stage" class="vn-stage">
                    <div id="vn-scene-bg" class="vn-scene-bg"></div>
                    <div id="vn-scene-overlay" class="vn-scene-overlay"></div>
                    <div id="vn-characters" class="vn-characters"></div>
                    <div id="vn-biz-overlay" class="vn-biz-overlay" style="display:none">
                        <div class="biz-clock-vn"><span id="biz-time">10:00</span></div>
                        <div class="biz-stats-vn">
                            <span>고객 <strong id="biz-customers">0</strong></span>
                            <span>매출 <strong id="biz-revenue">₩0</strong></span>
                            <span>준비 <strong id="biz-prepared">0</strong></span>
                        </div>
                        <div class="biz-progress-vn"><div id="biz-progress-bar" class="biz-progress-bar-vn"></div></div>
                    </div>
                    <!-- 중앙 선택지 오버레이 (영업 의사결정 등) -->
                    <div id="vn-center-overlay" class="vn-center-overlay" style="display:none">
                        <div class="vn-center-box">
                            <div id="vn-center-title" class="vn-center-title"></div>
                            <div id="vn-center-desc" class="vn-center-desc"></div>
                            <div id="vn-center-choices" class="vn-center-choices"></div>
                        </div>
                    </div>
                </div>

                <!-- VN 대화창 -->
                <div id="vn-dialogue" class="vn-dialogue">
                    <div id="vn-speaker" class="vn-speaker"></div>
                    <div id="vn-text" class="vn-text"></div>
                    <div id="vn-choices" class="vn-choices" style="display:none"></div>
                    <div id="vn-continue" class="vn-continue" style="display:none">클릭하여 계속 ▼</div>
                </div>

                <!-- VN 타임라인 미니바 (PREP/NIGHT) -->
                <div id="vn-timeline" class="vn-timeline" style="display:none">
                    <div class="vn-timeline-header">
                        <span id="timeline-title">준비 시간표</span>
                        <span id="timeline-info">0 / 3시간</span>
                    </div>
                    <div id="timeline-bar" class="vn-timeline-bar">
                        <div id="timeline-slots" class="timeline-slots"></div>
                    </div>
                    <button id="btn-confirm" class="btn btn-primary" disabled>행동 확정 [Space]</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 가격 변경 모달 -->
    <div id="modal-price" class="modal" style="display:none">
        <div class="modal-content">
            <h3>판매 가격 변경</h3>
            <input type="number" id="input-price" min="5000" max="100000" step="1000">
            <div class="modal-actions">
                <button id="btn-price-ok" class="btn btn-primary">확인</button>
                <button id="btn-price-cancel" class="btn">취소</button>
            </div>
        </div>
    </div>

    <!-- 시간 설정 모달 -->
    <div id="modal-time-config" class="modal" style="display:none">
        <div class="modal-content">
            <h3>하루 시간 설정</h3>
            <div class="time-config-group">
                <label>기상 시간 <span id="tc-wake-val">7</span>시</label>
                <input type="range" id="tc-wake" min="5" max="8" value="7">
            </div>
            <div class="time-config-group">
                <label>오픈 시간 <span id="tc-open-val">10</span>시</label>
                <input type="range" id="tc-open" min="9" max="12" value="10">
            </div>
            <div class="time-config-group">
                <label>마감 시간 <span id="tc-close-val">21</span>시</label>
                <input type="range" id="tc-close" min="18" max="23" value="21">
            </div>
            <div class="time-config-group">
                <label>취침 시간 <span id="tc-sleep-val">24</span>시</label>
                <input type="range" id="tc-sleep" min="22" max="26" value="24">
            </div>
            <div class="modal-actions">
                <button id="btn-tc-ok" class="btn btn-primary">확인</button>
                <button id="btn-tc-cancel" class="btn">취소</button>
            </div>
        </div>
    </div>

    <!-- BGM -->
    <audio id="bgm" loop preload="auto">
        <source src="bgm/main.mp3" type="audio/mpeg">
    </audio>

    <script src="js/sprites.js?v=3"></script>
    <script src="js/sfx.js?v=3"></script>
    <script src="js/api.js?v=3"></script>
    <script src="js/state.js?v=3"></script>
    <script src="js/vn-narration.js?v=3"></script>
    <script src="js/vn.js?v=3"></script>
    <script src="js/dashboard.js?v=3"></script>
    <script src="js/timeline.js?v=3"></script>
    <script src="js/phase-cards.js?v=3"></script>
    <script src="js/business.js?v=3"></script>
    <script src="js/app.js?v=3"></script>
</body>
</html>
