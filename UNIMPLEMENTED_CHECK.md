# π›‘ κ²μ„ λ£¨ν”„ μ™„μ„± μ κ²€ λ¦¬ν¬νΈ (Game Loop Completeness Check)

## 1. κ°μ”
ν„μ¬ `GameLoopService`μ™€ `simple_main.py`λ¥Ό ν†µν•΄ κ²μ„μ **κµ¬μ΅°μ  νλ¦„(Structure)**μ€ μ •μƒμ μΌλ΅ μ‘λ™ν•©λ‹λ‹¤.
ν•μ§€λ§ κ° νμ΄μ¦(Phase) λ‚΄λ¶€μ **μ‹¤μ  λΉ„μ¦λ‹μ¤ λ΅μ§(Logic)**μ€ λ€λ¶€λ¶„ κµ¬ν„λμ§€ μ•μ•κ±°λ‚ μ—°κ²°λμ§€ μ•μ€ μƒνƒμ…λ‹λ‹¤.

λ³Έ λ¬Έμ„λ” κ²μ„ λ£¨ν”„λ¥Ό κΈ°μ μ μΌλ΅ μ™„μ„±ν•κΈ° μ„ν•΄ **λ¬΄μ—‡μ΄ λ¶€μ΅±ν•μ§€** μƒμ„Έν μ κ²€ν• κ²°κ³Όμ…λ‹λ‹¤.

## 2. π§© λ―Έκµ¬ν„ ν•­λ© μ κ²€ (Unimplemented Parts)

### 2.1. β οΈ μ„λΉ„μ¤ κ³„μΈµ (Application Layer) λ„λ½
κ²μ„ λ£¨ν”„μ κ° νμ΄μ¦λ¥Ό λ‹΄λ‹Ήν•  μ„λΉ„μ¤λ“¤μ΄ μ΅΄μ¬ν•μ§€ μ•κ±°λ‚ μ—°κ²°λμ§€ μ•μ•μµλ‹λ‹¤.

| νμ΄μ¦ | λ‹΄λ‹Ή μ„λΉ„μ¤ (μμƒ) | ν„μ¬ μƒνƒ | μƒμ„Έ |
|:---:|:---:|:---:|:---|
| **ν”λ μ΄μ–΄ ν–‰λ™** | `ActionService` | β **λ―Έμ—°κ²°** | νμΌμ€ μ΅΄μ¬(`src/application/action_service.py`)ν•λ‚, `GameLoopService`μ—μ„ νΈμ¶ν•μ§€ μ•μ. |
| **AI ν–‰λ™** | `AIService` | β οΈ **μ‹¤ν–‰ λ¶κ°€** | νμΌμ€ μ΅΄μ¬(`src/application/ai_service.py`)ν•λ‚, ν•„μ”ν• ν¬νΈ(`AIEnginePort`)κ°€ μ—†μ–΄ μ‹¤ν–‰ μ‹ μ—λ¬ λ°μƒ. |
| **μ΄λ²¤νΈ** | `EventService` | β **μ—†μ** | μ΄λ²¤νΈ λ°μƒ/μ²λ¦¬ λ΅μ§μ„ λ‹΄λ‹Ήν•  μ„λΉ„μ¤ νμΌμ΄ μ•„μ μ—†μ. |
| **νλ§¤** | `SalesService` | β **μ—†μ** | λ§¤μ¶ λ° κ³ κ° λ°©λ¬Έ κ³„μ‚° λ΅μ§μ΄ μ—†μ. (ν„μ¬ λ¬΄μ΅°κ±΄ λ§¤μ¶ 0μ› μ²λ¦¬) |
| **μ •μ‚°** | `SettlementService` | β **μ—†μ** | μ„λ€λ£/μ¬λ£λΉ„ μ°¨κ° λ° μμ΄μµ κ³„μ‚° λ΅μ§ μ—†μ. |

### 2.2. π” ν¬νΈ κ³„μΈµ (Port Layer) λ„λ½
ν—¥μ‚¬κ³ λ‚  μ•„ν‚¤ν…μ²μ ν•µμ‹¬μΈ μΈν„°νμ΄μ¤(Port) νμΌλ“¤μ΄ λ„λ½λμ–΄ μμµλ‹λ‹¤.

- **`src/core/ports/ai_engine_port.py`:** `AIService`κ°€ μμ΅΄ν•κ³  μμ§€λ§ νμΌμ΄ μ΅΄μ¬ν•μ§€ μ•μµλ‹λ‹¤.
- **`src/core/ports/event_port.py`:** μ΄λ²¤νΈ λ΅μ§ μ²λ¦¬λ¥Ό μ„ν• μΈν„°νμ΄μ¤κ°€ ν•„μ”ν•  κ²ƒμΌλ΅ μμƒλλ‚ μ—†μµλ‹λ‹¤.
- **`src/core/ports/sales_port.py`:** νλ§¤ λ΅μ§ μ²λ¦¬λ¥Ό μ„ν• μΈν„°νμ΄μ¤κ°€ ν•„μ”ν•  κ²ƒμΌλ΅ μμƒλλ‚ μ—†μµλ‹λ‹¤.

### 2.3. π”— GameLoopService μ—°κ²° λ¶€μ΅±
ν„μ¬ `GameLoopService`λ” **"λΉ κ»λ°κΈ°"** μƒνƒμ…λ‹λ‹¤.
- **ν„μƒ:** `execute_player_action_phase` λ“±μ λ©”μ„λ“κ°€ λ‹¨μν ν”„λ¦°νΈ λ¬Έλ§ μ¶λ ¥ν•κ³  μ‹¤μ  λ΅μ§(`ActionService`)μ„ νΈμ¶ν•μ§€ μ•μµλ‹λ‹¤.
- **ν•„μ” μ‘μ—…:** κ° νμ΄μ¦λ³„ μ„λΉ„μ¤λ¥Ό `GameLoopService` μƒμ„±μμ— μ£Όμ…(Injection)ν•κ³ , ν•΄λ‹Ή μ„λΉ„μ¤λ¥Ό νΈμ¶ν•λ„λ΅ μ½”λ“λ¥Ό μμ •ν•΄μ•Ό ν•©λ‹λ‹¤.

## 3. π—“οΈ ν–¥ν›„ μ‘μ—… λ΅λ“λ§µ (Action Plan)

κ²μ„ λ£¨ν”„λ¥Ό **"μ‹¤μ λ΅ ν”λ μ΄ κ°€λ¥ν• μƒνƒ"**λ΅ λ§λ“¤κΈ° μ„ν•΄ λ‹¤μ μμ„λ΅ μ‘μ—…μ„ μ§„ν–‰ν•΄μ•Ό ν•©λ‹λ‹¤.

### 1λ‹¨κ³„: AI μ„λΉ„μ¤ λ³µκµ¬
1. `src/core/ports/ai_engine_port.py` νμΌμ„ μƒμ„±ν•μ—¬ μΈν„°νμ΄μ¤ μ •μ.
2. `AIService`κ°€ μ •μƒμ μΌλ΅ μ„ν¬νΈλλ„λ΅ μμ •.

### 2λ‹¨κ³„: λ„λ½λ μ„λΉ„μ¤ κµ¬ν„
1. **`SalesService` κµ¬ν„:** `Product`μ ν’μ§/κ°€κ²©/μΈμ§€λ„λ¥Ό λ°”νƒ•μΌλ΅ νλ§¤λ‰μ„ κ³„μ‚°ν•λ” λ΅μ§ μ‘μ„±.
2. **`EventService` κµ¬ν„:** `EventLoaderPort`λ¥Ό μ‚¬μ©ν•μ—¬ CSV μ΄λ²¤νΈλ¥Ό λ΅λ“ν•κ³ , ν™•λ¥ μ— λ”°λΌ μ΄λ²¤νΈλ¥Ό λ°μƒμ‹ν‚¤λ” λ΅μ§ μ‘μ„±.
3. **`SettlementService` κµ¬ν„:** ν„΄ μΆ…λ£ μ‹ μκΈ λ³€λ™(λ§¤μ¶ - λΉ„μ©)μ„ μ²λ¦¬ν•λ” λ΅μ§ μ‘μ„±.

### 3λ‹¨κ³„: κ²μ„ λ£¨ν”„ ν†µν•©
1. `GameLoopService`μ `__init__` λ©”μ„λ“ μμ •: λ¨λ“  μ„λΉ„μ¤(`ActionService`, `AIService`, `SalesService` λ“±)λ¥Ό μΈμλ΅ λ°›λ„λ΅ λ³€κ²½.
2. κ° νμ΄μ¦ μ‹¤ν–‰ λ©”μ„λ“(`_execute_*_phase`) μμ •: λ”λ―Έ λ΅μ§μ„ μ κ±°ν•κ³  μ‹¤μ  μ„λΉ„μ¤λ¥Ό νΈμ¶ν•μ—¬ κ²°κ³Όλ¥Ό λ°ν™ν•λ„λ΅ λ³€κ²½.

### 4λ‹¨κ³„: ν†µν•© ν…μ¤νΈ
1. `simple_main.py`λ¥Ό μ—…λ°μ΄νΈν•μ—¬ λ¨λ“  μ„λΉ„μ¤μ— λ€ν• Mock κ°μ²΄ λλ” μ‹¤μ  κ°μ²΄λ¥Ό μ£Όμ….
2. μ‹¤μ  ν”λ μ΄μ–΄ ν–‰λ™(μ: "μ”λ¦¬ν•κΈ°")μ„ μ…λ ¥ν–μ„ λ• μκΈ/μ¤νƒ―μ΄ λ³€ν•λ”μ§€ ν™•μΈ.
